#!/bin/bash

# Neovim
pip install --user --upgrade setuptools
pip install --user --upgrade pip
pip install --user --upgrade --force-reinstall neovim

pip2 install --user --upgrade setuptools
pip2 install --user --upgrade pip
pip2 install --user --upgrade --force-reinstall neovim

pip3 install --user --upgrade setuptools
pip3 install --user --upgrade pip
pip3 install --user --upgrade --force-reinstall neovim

# Python Packages
pip install requests websocket-client pync pafy vim-vint proselint yamllint

# Ruby packages
gem install mdless mdl

# Go deps
go get github.com/tools/godep
go get github.com/Unknwon/bra

# Install asdf
git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.3.0
# asdf node
asdf plugin-add nodejs https://github.com/asdf-vm/asdf-nodejs.git
sh ~/.asdf/plugins/nodejs/bin/import-release-team-keyring
LATEST_NODE_VERSION=`asdf list-all nodejs | tail -n 1 | tr -d '\n'`
asdf install nodejs $LATEST_NODE_VERSION
asdf global nodejs $LATEST_NODE_VERSION


# Install npm and packages
npm install -g npm@latest
npm update -g npm

# Neo/vim deps
npm install -g babel-cli jsonlint jshint eslint babel-eslint jsonlint jshint \
eslint-plugin-filenames eslint-plugin-flowtype eslint-plugin-lodash-fp \
eslint-plugin-standard babel-plugin-module-resolver eslint-plugin-promise \
eslint-config-standard-react eslint-config-standard eslint_d \
flow-bin caniuse-cmd neovim-client csscomb emoj typescript tslint \
diff-so-fancy tern tern-fetch yarn sass-lint alex

# airbnb-eslint
(
  export PKG=eslint-config-airbnb;
  npm info "$PKG@latest" peerDependencies --json | command sed 's/[\{\},]//g ; s/: /@/g' | xargs npm install --save-dev "$PKG@latest"
)

# other node deps
npm install -g http-server plugman term-img-cli cordova grunt-cli
case $(uname) in
  'Darwin')
    npm install -g ios-deploy ios-sim
    ;;
esac

# Mac deps
case $(uname) in
  'Darwin')
    vagrant plugin install vagrant-bindfs
    vagrant plugin install vagrant-hostmanager
    sudo chmod 600 ~/.netrc # ansible
    ;;
esac
